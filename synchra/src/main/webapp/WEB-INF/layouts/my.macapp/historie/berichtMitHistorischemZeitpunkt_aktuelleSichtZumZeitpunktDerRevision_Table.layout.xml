<?xml version="1.0" encoding="utf-8" ?>

<config:template-call
	xmlns:config="http://www.top-logic.com/ns/config/6.0"
	final="true"
	template="com.top_logic/table.template.xml"
>
	<arguments
		defaultColumns="name,histAssemblyPrice,hConstistsOf"
		model="selection(my.macapp/historie/berichteTable.layout.xml#Table)"
		type="Test:HistAssembly"
	>
		<name key="dynamic.5fc60750-ce87-4aea-beae-e7544b9004d8">
			<de>Bericht mit historischem Zeitpunkt (aktuelle Sicht zum Zeitpunkt der Revision)</de>
		</name>
		<modelBuilder class="com.top_logic.model.search.providers.ListModelByExpression"
			elements="model->$model.get(`Test:HBericht#containsCurrently`).map(x->$x.inRevision($model.get(`Test:HBericht#histRevision`)))"
			supportsElement="element->$element.instanceOf(`Test:HistAssembly`)"
		/>
		<configurationProviders>
			<configurationProvider class="com.top_logic.model.search.providers.ComputedColumnProviderByExpression"
				accessor="x->model->$x.inRevision($model.get(`Test:HBericht#histRevisionDateUntil`)).get(`Test:HistAssembly#histAssemblyPrice`)"
				columnId="ID_44509f3b_9e53_49f3_858b_17e1fb890a7c"
				columnType="tl.core:Integer"
			>
				<columnLabel key="dynamic.6fdfe508-08cc-475b-b9b6-f6b0a201bbfa">
					<en>Price until</en>
					<de>Preis zum Zeitpunkt bis</de>
				</columnLabel>
			</configurationProvider>
			<configurationProvider class="com.top_logic.model.search.providers.ComputedColumnProviderByExpression"
				accessor="x->model->($x.inRevision($model.get(`Test:HBericht#histRevisionDateUntil`)).get(`Test:HistAssembly#histAssemblyPrice`)) - ($x.inRevision($model.get(`Test:HBericht#histRevision`)).get(`Test:HistAssembly#histAssemblyPrice`))"
				columnId="ID_35dfab51_138f_4ac8_b699_163f574e7e05"
				columnType="tl.core:Integer"
			>
				<columnLabel key="dynamic.e042330e-91af-4c0a-951d-fec71ec33f57">
					<en>Change between from and til</en>
					<de>Ã„nderung zw. von und bis</de>
				</columnLabel>
			</configurationProvider>
			<configurationProvider class="com.top_logic.model.search.providers.ComputedColumnProviderByExpression"
				accessor="x->model->$x.inRevision($model.get(`Test:HBericht#histRevisionDateUntil`)).get(`Test:HistAssembly#hConstistsOf`)"
				columnId="ID_428d3f2a_c673_47da_913a_dece154e267e"
				columnType="Test:HistPart"
			>
				<columnLabel key="dynamic.a6bcdfaf-fe80-4510-8d64-532efeaf92b2">
					<en>consists of until</en>
					<de>besteht aus zum Zeitpunkt bis</de>
				</columnLabel>
			</configurationProvider>
		</configurationProviders>
		<buttons>
			<button id="exportExcel"
				class="com.top_logic.layout.table.export.ExcelExportHandler"
			/>
		</buttons>
	</arguments>
</config:template-call>