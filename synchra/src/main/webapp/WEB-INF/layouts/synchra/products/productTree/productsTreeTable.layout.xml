<?xml version="1.0" encoding="utf-8" ?>

<config:template-call
	xmlns:config="http://www.top-logic.com/ns/config/6.0"
	template="com.top_logic/treetable.template.xml"
>
	<arguments
		defaultColumns="name,tType"
		rootVisible="false"
		type="fma:ConstructionGroup,fma:SinglePart,fma:Connection"
	>
		<name key="dynamic.30ec7732-cd98-459f-9d9c-302a69154559">
			<en>Products</en>
			<de>Produkte</de>
		</name>
		<modelBuilder class="com.top_logic.model.search.providers.TreeModelByExpression"
			nodePredicate="node->$node.instanceOf(`fma:ConstructionGroup`)"
			parents="node->$node.referers(`fma:ConstructionGroup#used`)"
			rootNode="`synchra.Bom#LIBRARIES`"
		>
			<children><![CDATA[node -> switch {
    $node.instanceOf(`synchra.Bom:Libraries`): all(`fma:Product`);
    $node.instanceOf(`fma:Product`): $node.get(`fma:Product#buildGroup`);
    $node.instanceOf(`fma:ConstructionGroup`): $node.get(`fma:ConstructionGroup#consistsOf`);
    $node.instanceOf(`fma:Connection`): $node.get(`fma:ConstructionGroup#consistsOf`).get(`fma:ConstructionGroup#consistsOf`);
}


]]></children>
		</modelBuilder>
	</arguments>
</config:template-call>